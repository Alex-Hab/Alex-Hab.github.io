$(function(){var a=$("#oauth_first_form");$("#email").keydown(function(d){if(d.keyCode===13){d.stopPropagation();d.preventDefault();$("#term-accept").trigger("click")}});$("#term-accept").click(function(){var d=a.valid();if(!d){return}if(captcha.isInvisible()&&!captcha.getValue()){captcha.executeReCaptcha(b)}else{a.submit()}});function c(){var d=captcha.getValidationRules();d.email={required:true,trimemail:true};return d}a.validate({ignore:":hidden",rules:c(),messages:{email:{required:$.i18n.get("error.require_email_address"),trimemail:$.i18n.get("error.enter_valid_email")}},submitHandler:function(){b()}});function b(){var d={type:$("#type").val(),token:$("#token").val(),email:$("#email").val(),userId:$("#userId").val(),id_tk:$("#idToken").val(),appid:$("#appId").val(),openid:$("#openId").val(),_zs:$("#zoomSite").val(),captcha:captcha.getValue()};SB.post3({url:"/signin/term_accept",data:d,success:function(e){if(hasEmail&&$("#launchUrl").length>0){$("#oauth_first").hide();$("#launch").show();$("#launch").css("text-align","center");$("#content_container").css("min-height","360px");location.href=$("#launchUrl").val()}else{location.href=decodeURIComponent(e.result)}},error:function(g,e){var f=a.find(".alert-danger");if(g){f.text(e).show();captcha.refresh()}else{f.empty().hide()}},btnContainer:a.find("#term-accept"),showBusy:true});return false}});